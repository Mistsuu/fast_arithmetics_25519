#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "fast_arithmetics_142111.h"

#define NCOLS 10000
#define NROWS 10000

Int142111* mat1;
Int142111* mat2;
#define M1(irow, icol)         mat1[(irow) * NCOLS + (icol)]
#define M2(irow, icol)         mat2[(irow) * NCOLS + (icol)]
#define M1L(irow, icol, ilimb) mat1[(irow) * NCOLS + (icol)].limbs[ilimb]
#define M2L(irow, icol, ilimb) mat2[(irow) * NCOLS + (icol)].limbs[ilimb]

Int142111* createMatrix()
{
    Int142111* tmpMat = (Int142111*)malloc(NROWS * NCOLS * sizeof(Int142111));
    memset(tmpMat, 0, NROWS * NCOLS * sizeof(Int142111));
    return tmpMat;
}

void init()
{
    mat1 = createMatrix(NROWS, NCOLS);
    mat2 = createMatrix(NROWS, NCOLS);
    for (int i = 0; i < 9999; ++i)
        set142111(&M1(i, i+1), "0x1");
    set142111(&M1(9999, 0),  "0x19485");
    set142111(&M1(9999, 1),  "0x19484");
    set142111(&M1(9999, 2),  "0x19484");
    set142111(&M1(9999, 3),  "0x19484");
    set142111(&M1(9999, 4),  "0x19483");
    set142111(&M1(9999, 5),  "0x19483");
    set142111(&M1(9999, 6),  "0x19483");
    set142111(&M1(9999, 7),  "0x19482");
    set142111(&M1(9999, 8),  "0x19482");
    set142111(&M1(9999, 9),  "0x19482");
    set142111(&M1(9999, 10), "0x19481");
    set142111(&M1(9999, 11), "0x19481");
    set142111(&M1(9999, 12), "0x19481");
    set142111(&M1(9999, 13), "0x19480");
    set142111(&M1(9999, 14), "0x19480");
    set142111(&M1(9999, 15), "0x19480");
    set142111(&M1(9999, 16), "0x1947f");
    set142111(&M1(9999, 17), "0x1947f");
    set142111(&M1(9999, 18), "0x1947f");
    set142111(&M1(9999, 19), "0x1947f");
    set142111(&M1(9999, 20), "0x1947e");
    set142111(&M1(9999, 21), "0x1947e");
    set142111(&M1(9999, 22), "0x1947e");
    set142111(&M1(9999, 23), "0x1947d");
    set142111(&M1(9999, 24), "0x1947d");
    set142111(&M1(9999, 25), "0x1947d");
    set142111(&M1(9999, 26), "0x1947c");
    set142111(&M1(9999, 27), "0x1947c");
    set142111(&M1(9999, 28), "0x1947c");
    set142111(&M1(9999, 29), "0x1947b");
    set142111(&M1(9999, 30), "0x1947b");
    set142111(&M1(9999, 31), "0x1947b");
    set142111(&M1(9999, 32), "0x1947a");
    set142111(&M1(9999, 33), "0x1947a");
    set142111(&M1(9999, 34), "0x1947a");
    set142111(&M1(9999, 35), "0x19479");
    set142111(&M1(9999, 36), "0x19479");
    set142111(&M1(9999, 37), "0x19479");
    set142111(&M1(9999, 38), "0x19478");
    set142111(&M1(9999, 39), "0x19478");
    set142111(&M1(9999, 40), "0x19478");
    set142111(&M1(9999, 41), "0x19478");
    set142111(&M1(9999, 42), "0x19477");
    set142111(&M1(9999, 43), "0x19477");
    set142111(&M1(9999, 44), "0x19477");
    set142111(&M1(9999, 45), "0x19476");
    set142111(&M1(9999, 46), "0x19476");
    set142111(&M1(9999, 47), "0x19476");
    set142111(&M1(9999, 48), "0x19475");
    set142111(&M1(9999, 49), "0x19475");
    set142111(&M1(9999, 50), "0x19475");
    set142111(&M1(9999, 51), "0x19474");
    set142111(&M1(9999, 52), "0x19474");
    set142111(&M1(9999, 53), "0x19474");
    set142111(&M1(9999, 54), "0x19473");
    set142111(&M1(9999, 55), "0x19473");
    set142111(&M1(9999, 56), "0x19473");
    set142111(&M1(9999, 57), "0x19472");
    set142111(&M1(9999, 58), "0x19472");
    set142111(&M1(9999, 59), "0x19472");
    set142111(&M1(9999, 60), "0x19471");
    set142111(&M1(9999, 61), "0x19471");
    set142111(&M1(9999, 62), "0x19471");
    set142111(&M1(9999, 63), "0x19471");
    set142111(&M1(9999, 64), "0x19470");
    set142111(&M1(9999, 65), "0x19470");
    set142111(&M1(9999, 66), "0x19470");
    set142111(&M1(9999, 67), "0x1946f");
    set142111(&M1(9999, 68), "0x1946f");
    set142111(&M1(9999, 69), "0x1946f");
    set142111(&M1(9999, 70), "0x1946e");
    set142111(&M1(9999, 71), "0x1946e");
    set142111(&M1(9999, 72), "0x1946e");
    set142111(&M1(9999, 73), "0x1946d");
    set142111(&M1(9999, 74), "0x1946d");
    set142111(&M1(9999, 75), "0x1946d");
    set142111(&M1(9999, 76), "0x1946c");
    set142111(&M1(9999, 77), "0x1946c");
    set142111(&M1(9999, 78), "0x1946c");
    set142111(&M1(9999, 79), "0x1946b");
    set142111(&M1(9999, 80), "0x1946b");
    set142111(&M1(9999, 81), "0x1946b");
    set142111(&M1(9999, 82), "0x1946a");
    set142111(&M1(9999, 83), "0x1946a");
    set142111(&M1(9999, 84), "0x1946a");
    set142111(&M1(9999, 85), "0x1946a");
    set142111(&M1(9999, 86), "0x19469");
    set142111(&M1(9999, 87), "0x19469");
    set142111(&M1(9999, 88), "0x19469");
    set142111(&M1(9999, 89), "0x19468");
    set142111(&M1(9999, 90), "0x19468");
    set142111(&M1(9999, 91), "0x19468");
    set142111(&M1(9999, 92), "0x19467");
    set142111(&M1(9999, 93), "0x19467");
    set142111(&M1(9999, 94), "0x19467");
    set142111(&M1(9999, 95), "0x19466");
    set142111(&M1(9999, 96), "0x19466");
    set142111(&M1(9999, 97), "0x19466");
    set142111(&M1(9999, 98), "0x19465");
    set142111(&M1(9999, 99), "0x19465");
}

void cleanup()
{
    free(mat2);
    free(mat1);
}

// ======================== ARITHMETICS =========================

void sqrMatrix()
{
    Int142111 tmp;
    for (int r = 0; r < NROWS; ++r)
    for (int c = 0; c < NCOLS; ++c)
    {
        for (int i = 0; i < NCOLS; ++i) {
            mul142111(&tmp, &M1(r, i), &M1(i, c));
            add142111(&M2(r, c), &M2(r, c), &tmp);
        }
    }
}

// ============================ MAIN ============================
int main(int argc, char **argv)
{
    init();
    // --------------- logic here --------------------

    sqrMatrix();

    // -----------------------------------------------
    cleanup();
    return 0;
}